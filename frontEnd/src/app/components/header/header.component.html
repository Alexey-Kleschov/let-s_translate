<div class="wrapper" (window:resize)="resizeWindow()">

  <nav [class.active]="!window.isClose">
    <div class="left-block ">

      <div class="logo" routerLink="/"></div>

      <a class="button" (click)="toggleMenu()" *ngIf="window.isWindowSizeSmall && isRole.auth">
        <span class="menu">&#9776;</span>
      </a>

      <button class="menu_btn" mat-button routerLink="/dashboard" *ngIf="isRole.auth && !window.isWindowSizeSmall">
        Dashboard
      </button>

      <button class="menu_btn" mat-button routerLink="/new_texts" *ngIf="isRole.customer && !window.isWindowSizeSmall">
        New Texts
      </button>

      <button
        class="menu_btn"
        mat-button
        routerLink="/my_translations"
        *ngIf="isRole.translator && !window.isWindowSizeSmall">
        My translations
      </button>

      <button
        class="menu_btn"
        mat-button
        routerLink="/messages"
        *ngIf="isRole.auth && !window.isWindowSizeSmall"
        matBadge="11" matBadgePosition="after" matBadgeColor="accent">
        <i class="fas fa-envelope prefix"></i>
        Messages
      </button>

      <button
        class="menu_btn" mat-button
        routerLink="/collections"
        *ngIf="isRole.customer && !window.isWindowSizeSmall">
        Collections
      </button>


      <ul
        class="sub-menu"
        *ngIf="window.isWindowSizeSmall && isRole.auth"
        [style.display]="window.isClose? 'none': 'block'">
        <li routerLink="/dashboard">Dashboard</li>
        <li routerLink="/new_texts" *ngIf="isRole.customer">New Texts</li>
        <li routerLink="/my_translations" *ngIf="isRole.translator">My translations</li>
        <li routerLink="/messages">Messages</li>
        <li routerLink="/collections" *ngIf="isRole.customer">Collections</li>
      </ul>
    </div>
    <!-------------------LOGIN---------------------------->
    <div class="right-block">
      <p *ngIf="userProfile" class="name">{{userProfile.name}}</p>
      <div
        *ngIf="userProfile"
        class="user-photo"
        [style.backgroundImage]="'url(' + imageUrl + ')'"
        (click)="basicModal.show()"
        mdbWavesEffect>
      </div>
      <button mat-button
              data-toggle="modal"
              data-target="#basicExample"
              (click)="frame.show()"
              *ngIf="!isRole.auth"
              mdbWavesEffect>
        Login
      </button>

      <button (click)="logout()" mat-button *ngIf="isRole.auth">Logout</button>
      <button mat-button routerLink="/new_translator_reg">Register</button>
    </div>
  </nav>

      <ul class="navbar-nav ml-auto nav-flex-icons">
        <li class="nav-item">

          <div class="btn-group" mdbDropdown>
            <div *ngIf="userProfile" class="user-photo" [style.backgroundImage]="'url(' + userProfile.photo + ')'"
              (click)="basicModal.show()" mdbWavesEffect>
            </div>
            <!-- <div class="coins">
              <p>{{userProfile.coins}}</p>
            </div> -->
            <!-- <h1>{{userProfile.name}}</h1> -->

            <button class="btn btn-outline-white btn-sm my-0" data-toggle="modal" data-target="#basicExample"
              (click)="frame.show()" *ngIf="!isRole.auth" mdbWavesEffect>
              Login
            </button>
            <button class="btn btn-outline-danger btn-sm" (click)="logout()" *ngIf="isRole.auth">Logout</button>
            <button *ngIf="!isRole.auth" class="btn btn-outline-white btn-sm my-0"
              routerLink="/new_translator_reg">Register</button>
          </div>
        </div>

        <div class="modal-footer d-flex justify-content-center">
          <button (click)="login(frame)" mdbBtn color="default" class="waves-light" mdbWavesEffect>Login</button>
        </div>
      </div>
    </div>
  </div>
  <!---------------------------------------------------->

  <!---------------------Profile------------------------>

  <div mdbModal #basicModal="mdbModal" class="modal fade" tabindex="-1" role="dialog"
       aria-labelledby="myBasicModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close pull-right text-danger" aria-label="Close" (click)="basicModal.hide()">
            <span aria-hidden="true" style="font-size: 1.5rem">Ã—</span>
          </button>
          <h4 class="modal-title w-100" id="myModalLabel">Profile</h4>
        </div>
        <div class="modal-body">

          <div id="info-user-block" *ngIf="userProfileForm">

            <img [src]="imageUrl " (click)="filePicker.click()">
            <input
              type="file"
              hidden
              #filePicker
              (change)="onImagePicked($event)">

            <div class="text-block">
              <div class="md-form mb-3">
                <i class="fas fa-user prefix" [ngClass]="userProfileForm.name.valid ? 'green-text' : 'red-text'"></i>
                <input
                  [formControl]="userProfileForm.name"
                  type="text"
                  id="userName"
                  class="form-control validate"
                  mdbInput
                  mdbValidate>
                <label data-error="wrong" data-success="right" for="userName">Name</label>
                <mdb-error
                  *ngIf="userProfileForm.name.invalid && (userProfileForm.name.dirty || userProfileForm.name.touched)">
                  Input a valid name
                </mdb-error>
                <mdb-success
                  *ngIf="userProfileForm.name.valid && (userProfileForm.name.dirty || userProfileForm.name.touched)">
                  Ok!
                </mdb-success>
              </div>

              <div class="md-form mb-3">
                <i class="fas fa-envelope prefix"
                   [ngClass]="userProfileForm.email.valid ? 'green-text' : 'red-text'"></i>
                <input
                  [formControl]="userProfileForm.email"
                  type="email"
                  id="userEmail"
                  class="form-control validate"
                  mdbInput
                  mdbValidate>
                <label data-error="wrong" data-success="right" for="userEmail">Email</label>
                <mdb-error
                  *ngIf="userProfileForm.email.invalid && (userProfileForm.email.dirty || userProfileForm.email.touched)">
                  Input a valid email
                </mdb-error>
                <mdb-success
                  *ngIf="userProfileForm.email.valid && (userProfileForm.email.dirty || userProfileForm.email.touched)">
                  Ok!
                </mdb-success>
              </div>
            </div>
          </div>

        </div>
        <div class="modal-footer">
          <button type="button" mdbBtn class="waves-light" aria-label="Close"
                  style="background-color: #c7331d; color:white"
                  (click)="basicModal.hide()" mdbWavesEffect>Close
          </button>
          <button
            type="button"
            mdbBtn color="primary"
            class="relative waves-light"
            mdbWavesEffect
            (click)="updateProfile(basicModal)">
            Save changes
          </button>
        </div>
      </div>
    </div>
  </div>

  <!---------------------------------------------------->

  <div style="clear: both"></div>
</div>

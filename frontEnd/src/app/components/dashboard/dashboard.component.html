<div class="wrapper">
  <app-header></app-header>

  <div class="block">
    <div class="title anim">Incomplete translations</div>

    <div class="filter" *ngIf="ordersArray && role === 'translator'">
      <div>
        <mat-form-field class="tags">
          <mat-chip-list #chipList aria-label="tags">
            <mat-chip *ngFor="let tag of tags" [selectable]="selectable" [removable]="removable" (removed)="remove(tag)"
              color="accent">
              {{tag}}
              <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
            </mat-chip>
            <input placeholder="Select some several tags" #fruitInput [formControl]="tagCtrl" [matAutocomplete]="auto"
              [matChipInputFor]="chipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
              [matChipInputAddOnBlur]="addOnBlur" (matChipInputTokenEnd)="add($event)">
          </mat-chip-list>
          <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
            <mat-option *ngFor="let tag of filteredTags | async" [value]="tag">
              {{tag}}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
      </div>
      <button mdbBtn color="info" block="true" class="my-4" (click)="filter()" matStepperNext>Filter</button>
    </div>

    <div class="container">
      <table class="table table-hover bordered" *ngIf="ordersArray && role === 'translator'">
        <thead class="black white-text">
          <tr>
            <th scope="col">Title</th>
            <th scope="col">Tags</th>
            <th scope="col">From -> to</th>
            <th scope="col">Date</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor=" let text of ordersArray; let i=index">
            <td ><b> {{text.title}}</b></td>
            <td>
              <p><b>{{text.tags}}</b></p>
            </td>
            <td><b>{{text.originalLanguage}} => {{text.translateLanguage}}</b></td>
            <td><b>{{text.date | date}}</b></td>
            <td> <button (click)="getOrder(text.id, text.idCustomer)" type="button"
                class="btn btn-outline-primary waves-effect">Get</button></td>
          </tr>
        </tbody>
      </table>

      <table class="table table-hover bordered" *ngIf="ordersArray && role === 'customer'">
        <thead class="black white-text">
          <tr>
            <th scope="col">Title</th>
            <th scope="col">Status</th>
            <th scope="col">Date</th>
            <th scope="col">Last comment</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let text of ordersArray">
            <td><b><a [routerLink]="['/text_details',text.id]"> {{text.title}}</a></b></td>
            <td>
              <h5><span class="badge badge" [ngClass]="{
              'badge-danger': status[text.status] === 'Waiting translator',
              'badge-success': status[text.status] === 'In progress',
              'badge-primary': status[text.status] === 'Ready for translator review'}">{{status[text.status]}}</span></h5>
            </td>
            <td><b>{{text.date | date}}</b></td>
            <td><a class="link" [routerLink]="['/text_details',text.id]" fragment="bottom">Go to the last comment...</a></td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>
  <app-footer></app-footer>